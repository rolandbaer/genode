This patch increases the amount of worker that will be spawned upon a work queue
when a work is submitted. The patch implies that three workers will be used for
three works (before it was one). The fourth work will be queued.

--- src/linux/kernel/workqueue.c
+++ src/linux/kernel/workqueue.c
@@ -931,7 +931,10 @@ static unsigned long work_offqd_pack_flags(struct work_offq_data *offqd)
  */
 static bool need_more_worker(struct worker_pool *pool)
 {
-	return !list_empty(&pool->worklist) && !pool->nr_running;
+	/*
+	 * Assume two works can deadlock and make a third available
+	 */
+	return !list_empty(&pool->worklist) && pool->nr_running < 3;
 }
 
 /* Can I start working?  Called from busy but !running workers. */
